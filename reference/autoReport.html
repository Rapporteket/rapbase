<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Shiny modules and helper functions for registry auto reports — autoReport • rapbase</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Shiny modules and helper functions for registry auto reports — autoReport" />
<meta property="og:description" content="These shiny modules may be used to set up auto reporting from registries at
Rapporteket." />
<meta property="og:image" content="/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145582048-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145582048-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rapbase</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.17.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/Rapporteket/rapbase/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Shiny modules and helper functions for registry auto reports</h1>
    <small class="dont-index">Source: <a href='http://github.com/Rapporteket/rapbase/blob/master/R/autoReport.R'><code>R/autoReport.R</code></a></small>
    <div class="hidden name"><code>autoReport.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These shiny modules may be used to set up auto reporting from registries at
Rapporteket.</p>
    </div>

    <pre class="usage"><span class='fu'>autoReportUI</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>

<span class='fu'>autoReportOrgInput</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>

<span class='fu'>autoReportOrgServer</span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>orgs</span><span class='op'>)</span>

<span class='fu'>autoReportFormatInput</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>

<span class='fu'>autoReportFormatServer</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>

<span class='fu'>autoReportInput</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span>

<span class='fu'>autoReportServer</span><span class='op'>(</span>
  <span class='va'>id</span>,
  <span class='va'>registryName</span>,
  <span class='va'>type</span>,
  org <span class='op'>=</span> <span class='cn'>NULL</span>,
  paramNames <span class='op'>=</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/reactiveVal.html'>reactiveVal</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>,
  paramValues <span class='op'>=</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/reactiveVal.html'>reactiveVal</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>,
  reports <span class='op'>=</span> <span class='cn'>NULL</span>,
  orgs <span class='op'>=</span> <span class='cn'>NULL</span>,
  eligible <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>autoReportApp</span><span class='op'>(</span>
  registryName <span class='op'>=</span> <span class='st'>"rapbase"</span>,
  type <span class='op'>=</span> <span class='st'>"subscription"</span>,
  reports <span class='op'>=</span> <span class='cn'>NULL</span>,
  paramNames <span class='op'>=</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/reactive.html'>reactive</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>,
  orgs <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='fu'>orgList2df</span><span class='op'>(</span><span class='va'>orgs</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>Character string providing the shiny module id.</p></td>
    </tr>
    <tr>
      <th>orgs</th>
      <td><p>Named list of organizations (names) and ids (values). When set to
<code>NULL</code> (default) the ids found in auto report data will be used in the
table listing existing auto reports.</p></td>
    </tr>
    <tr>
      <th>registryName</th>
      <td><p>Character string with the registry name key. Must
correspond to the registry R package name.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Character string defining the type of auto reports. Must be one
of <code><a href='https://rdrr.io/r/base/c.html'>c("subscription", "dispatchment", "bulletin")</a></code></p></td>
    </tr>
    <tr>
      <th>org</th>
      <td><p>Shiny reactive or NULL (default) defining the organization (id)
of the data source used for dispatchments and bulletins (in which case it
cannot be set to NULL) and its value will be used to populate the
<em>organization</em> field in auto report data (autoReport.yml) for these auto
report types. On the other hand, since subscriptions are personal (per user)
the only relevant organization id will implicit be that of the user and in
this case any value of <code>org</code> will be disregarded.</p></td>
    </tr>
    <tr>
      <th>paramNames</th>
      <td><p>Shiny reactive value as a vector of parameter names of
which values are to be set interactively at application run time. Each
element of this vector must match exactly those of <code>paramValues</code>.
Default value is <code><a href='https://rdrr.io/pkg/shiny/man/reactiveVal.html'>shiny::reactiveVal("")</a></code>.</p></td>
    </tr>
    <tr>
      <th>paramValues</th>
      <td><p>Shiny reactive value as a vector of those parameter values
to be set interactively, <em>i.e.</em> as per user input in the application.
Default value is set to <code><a href='https://rdrr.io/pkg/shiny/man/reactiveVal.html'>shiny::reactiveVal("")</a></code> in which case parameter
values defined in <code>reports</code> will be used as is. In other words,
explicit use of <code>paramValues</code> will only be needed if parameter values
must be changed during application run time. If so, each element of this
vector must correspond exactly to those of <code>paramNames</code>.</p></td>
    </tr>
    <tr>
      <th>reports</th>
      <td><p>List of a given structure that provides meta data for the
reports that are made available as automated reports. See Details for further
description.</p></td>
    </tr>
    <tr>
      <th>eligible</th>
      <td><p>Logical defining if the module should be allowed to work at
full capacity. This might be useful when access to module products should be
restricted. Default is TRUE, <em>i.e.</em> no restrictions.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>In general, shiny objects. In particular, <code>autoreportOrgServer</code>
returns a list with names "name" and "value" with corresponding reactive
values for the selected organization name and id. This may be used when
parameter values of auto report functions needs to be altered at application
run time. <code>orgList2df</code> returns a data frame with columns "name" and
"id".</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <em>reports</em> argument must be a list where each entry
represents one report and its name will be used in the auto report user
interface for selecting reports, <em>e.g.</em>
<code>reports = list(MagicReport = ...)</code> will produce the entry "MagicReport"
in the GUI selectable reports. The value of each entry must be another list
with the following names and values:</p><dl>
  <dt>synopsis</dt><dd><p>character string describing the report</p></dd>
  <dt>fun</dt><dd><p>report function base name (without"()")</p></dd>
  <dt>paramNames</dt><dd><p>character vector naming all arguments of <em>fun</em></p></dd>
  <dt>paramValues</dt><dd><p>vector with values corresponding to <em>paramNames</em></p></dd>

</dl><p>These named values will be used to run reports none-interactively on a given
schedule and must therefore represent existing and exported functions from
the registry R package. For subscriptions the <em>reports</em> list can be used
as is, more specifically that the values provided in <em>paramValues</em> can
go unchanged. For dispatchments and bulletins it is likely that parameter
values must be set dynamically in which case <em>paramValues</em> must be
a reactive part of the application. See Examples on how function arguments
may be used as reactives in an application.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## make a list for report metadata</span>
<span class='va'>reports</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  FirstReport <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    synopsis <span class='op'>=</span> <span class='st'>"First example report"</span>,
    fun <span class='op'>=</span> <span class='st'>"fun1"</span>,
    paramNames <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"organization"</span>, <span class='st'>"topic"</span>, <span class='st'>"outputFormat"</span><span class='op'>)</span>,
    paramValues <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>111111</span>, <span class='st'>"work"</span>, <span class='st'>"html"</span><span class='op'>)</span>
  <span class='op'>)</span>,
  SecondReport <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    synopsis <span class='op'>=</span> <span class='st'>"Second example report"</span>,
    fun <span class='op'>=</span> <span class='st'>"fun2"</span>,
    paramNames <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"organization"</span>, <span class='st'>"topic"</span>, <span class='st'>"outputFormat"</span><span class='op'>)</span>,
    paramValues <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>111111</span>, <span class='st'>"leisure"</span>, <span class='st'>"pdf"</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='co'>## make a list of organization names and numbers</span>
<span class='va'>orgs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  OrgOne <span class='op'>=</span> <span class='fl'>111111</span>,
  OrgTwo <span class='op'>=</span> <span class='fl'>222222</span>
<span class='op'>)</span>

<span class='co'>## client user interface function</span>
<span class='va'>ui</span> <span class='op'>&lt;-</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/fluidPage.html'>fluidPage</a></span><span class='op'>(</span>
  <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/sidebarLayout.html'>sidebarLayout</a></span><span class='op'>(</span>
    <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/sidebarLayout.html'>sidebarPanel</a></span><span class='op'>(</span>
      <span class='fu'>autoReportFormatInput</span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>,
      <span class='fu'>autoReportOrgInput</span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>,
      <span class='fu'>autoReportInput</span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>
    <span class='op'>)</span>,
    <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/sidebarLayout.html'>mainPanel</a></span><span class='op'>(</span>
      <span class='fu'>autoReportUI</span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>
    <span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='co'>## server function</span>
<span class='va'>server</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>input</span>, <span class='va'>output</span>, <span class='va'>session</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>org</span> <span class='op'>&lt;-</span> <span class='fu'>autoReportOrgServer</span><span class='op'>(</span><span class='st'>"test"</span>, <span class='va'>orgs</span><span class='op'>)</span>
  <span class='va'>format</span> <span class='op'>&lt;-</span> <span class='fu'>autoReportFormatServer</span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>

  <span class='co'># set reactive parameters overriding those in the reports list</span>
  <span class='va'>paramNames</span> <span class='op'>&lt;-</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/reactive.html'>reactive</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"organization"</span>, <span class='st'>"outputFormat"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>paramValues</span> <span class='op'>&lt;-</span> <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/reactive.html'>reactive</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>org</span><span class='op'>$</span><span class='fu'>value</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

  <span class='fu'>autoReportServer</span><span class='op'>(</span>
    id <span class='op'>=</span> <span class='st'>"test"</span>, registryName <span class='op'>=</span> <span class='st'>"rapbase"</span>, type <span class='op'>=</span> <span class='st'>"dispatchment"</span>,
    org <span class='op'>=</span> <span class='va'>org</span><span class='op'>$</span><span class='va'>value</span>, paramNames <span class='op'>=</span> <span class='va'>paramNames</span>, paramValues <span class='op'>=</span> <span class='va'>paramValues</span>,
    reports <span class='op'>=</span> <span class='va'>reports</span>, orgs <span class='op'>=</span> <span class='va'>orgs</span>, eligible <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># run the shiny app in an interactive environment</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'>shiny</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/shiny/man/shinyApp.html'>shinyApp</a></span><span class='op'>(</span><span class='va'>ui</span>, <span class='va'>server</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Are Edvardsen, Kevin Otto Thon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


