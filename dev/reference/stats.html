<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Shiny modules and helper functions for registry usage reports — stats • rapbase</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Shiny modules and helper functions for registry usage reports — stats"><meta name="description" content="These modules may be used by registries for easy setup of usage reports.
The intended purpose is to provide registry staff access to when and by
whom the resources at Rapporteket were used, i.e. application
start-up and single report usage. As such, this will be a tool to provide
useful statistics. However, it might also serve as a formal monitor utility
but only if logging is carefully implemented throughout the relevant
functions that make up the registry application at Rapporteket."><meta property="og:description" content="These modules may be used by registries for easy setup of usage reports.
The intended purpose is to provide registry staff access to when and by
whom the resources at Rapporteket were used, i.e. application
start-up and single report usage. As such, this will be a tool to provide
useful statistics. However, it might also serve as a formal monitor utility
but only if logging is carefully implemented throughout the relevant
functions that make up the registry application at Rapporteket."><meta property="og:image" content="/logo.svg"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rapbase</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Rapporteket/rapbase/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Shiny modules and helper functions for registry usage reports</h1>
      <small class="dont-index">Source: <a href="https://github.com/Rapporteket/rapbase/blob/v2.0.1/R/moduleStats.R" class="external-link"><code>R/moduleStats.R</code></a></small>
      <div class="d-none name"><code>stats.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These modules may be used by registries for easy setup of usage reports.
The intended purpose is to provide registry staff access to when and by
whom the resources at Rapporteket were used, <em>i.e.</em> application
start-up and single report usage. As such, this will be a tool to provide
useful statistics. However, it might also serve as a formal monitor utility
but only if logging is carefully implemented throughout the relevant
functions that make up the registry application at Rapporteket.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">statsInput</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">statsUI</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">statsServer</span><span class="op">(</span><span class="va">id</span>, <span class="va">registryName</span>, app_id <span class="op">=</span> <span class="cn">NULL</span>, eligible <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">statsServer2</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">registryName</span>,</span>
<span>  app_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eligible <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveVal.html" class="external-link">reactiveVal</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">statsApp</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logFormat</span><span class="op">(</span><span class="va">log</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logTimeFrame</span><span class="op">(</span><span class="va">log</span>, <span class="va">startDate</span>, <span class="va">endDate</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>Character string shiny module id</p></dd>


<dt id="arg-registryname">registryName<a class="anchor" aria-label="anchor" href="#arg-registryname"></a></dt>
<dd><p>Character string registry name key</p></dd>


<dt id="arg-app-id">app_id<a class="anchor" aria-label="anchor" href="#arg-app-id"></a></dt>
<dd><p>An identifier for a particular registry. Default value is NULL,
in which case no action is taken. If value is provided, the log is filtered
to show only entries matching chosen app_id.</p></dd>


<dt id="arg-eligible">eligible<a class="anchor" aria-label="anchor" href="#arg-eligible"></a></dt>
<dd><p>Logical defining if the module should be allowed to work at
full capacity. This might be useful when access to module products should be
restricted. Default is TRUE, <em>i.e.</em> no restrictions.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>Data frame containing log data (in Rapporteket format)</p></dd>


<dt id="arg-startdate">startDate<a class="anchor" aria-label="anchor" href="#arg-startdate"></a></dt>
<dd><p>Date object defining start of interval (character
representation "YYYY-MM-DD")</p></dd>


<dt id="arg-enddate">endDate<a class="anchor" aria-label="anchor" href="#arg-enddate"></a></dt>
<dd><p>Date object defining end of interval (character representation
"YYYY-MM-DD")</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Shiny objects, mostly. Helper functions may return other stuff too.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># client user interface function</span></span></span>
<span class="r-in"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span><span class="fu">statsInput</span><span class="op">(</span><span class="st">"test"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span><span class="fu">statsUI</span><span class="op">(</span><span class="st">"test"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># server function</span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">statsServer</span><span class="op">(</span><span class="st">"test"</span>, registryName <span class="op">=</span> <span class="st">"rapbase"</span>, eligible <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run the shiny app in an interactive environment</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Are Edvardsen, Kevin Otto Thon, Arnfinn Hykkerud Steindal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

